#include<stdio.h>
#include<unistd.h>
#include<string.h>
int main(){
    int fd[2];
    int fd1[2];
    char arr[50];
    int len;
    char first,last,temp;
    
    if(pipe(fd)==-1 || pipe(fd1)==-1)
    printf("Error creating pipe");
    
    int pid=fork();
    if(pid<0)
    printf("Error creating fork");
    if(pid==0){
        close(fd[0]);
        close(fd1[0]);
        printf("\nChild process");
        printf("\nEnter a string: ");
        fgets(arr,sizeof(arr),stdin);
        len=strlen(arr);
        write(fd1[1],&len,sizeof(int));
        write(fd[1], arr,sizeof(char)*len);
    }
    else{
        close(fd[1]);
        close(fd1[1]);
      
        printf("\nParent process");
        read(fd1[0],&len,sizeof(int));
        read(fd[0],arr,sizeof(char)*len);
        for(int i=0,j=len-1;i<j;i++,j--){
            temp=arr[i];
            arr[i]=arr[j];
            arr[j]=temp;
        }
        
        for(int i=0; i<len; i++){
            printf("%c", arr[i]);
        }
        
    }
    
}


